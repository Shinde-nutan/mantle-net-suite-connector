<?xml version="1.0" encoding="UTF-8"?>
<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-3.xsd">

    <view-entity entity-name="TransferOrderItemSyncView" package="co.hotwax.netsuite.order">
        <description>View to get Transfer Order details.</description>
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="PS" entity-name="org.apache.ofbiz.product.store.ProductStore" join-from-alias="OH">
            <key-map field-name="productStoreId" related="productStoreId"/>
        </member-entity>
        <member-entity entity-alias="SCENM" entity-name="moqui.basic.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="OISG" entity-name="org.apache.ofbiz.order.order.OrderItemShipGroup" join-from-alias="OI">
            <key-map field-name="orderId"/>
            <key-map field-name="shipGroupSeqId"/>
        </member-entity>
        <member-entity entity-alias="OID" entity-name="co.hotwax.order.OrderIdentification" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
            <entity-condition>
                <econdition entity-alias="OID" field-name="orderIdentificationTypeId" value="NETSUITE_ORDER_ID"/>
                <date-filter/>
            </entity-condition>
        </member-entity>
        <member-entity entity-alias="INVORD" entity-name="co.hotwax.netsuite.order.InvalidNetSuiteTOOrders" sub-select="non-lateral" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
        </member-entity>

        <alias-all entity-alias="OISG">
            <exclude field="orderId"/>
            <exclude field="shipGroupSeqId"/>
        </alias-all>
        <alias entity-alias="OI" name="orderItemSeqId"/>
        <alias entity-alias="OI" field="externalId" name="orderItemExternalId"/>
        <alias entity-alias="OI" name="statusId"/>
        <alias entity-alias="OI" name="productId"/>
        <alias entity-alias="OI" name="quantity"/>
        <alias entity-alias="OI" name="cancelQuantity"/>
        <alias entity-alias="OI" name="unitPrice"/>
        <alias entity-alias="OI" name="shipGroupSeqId"/>

        <alias entity-alias="OH" name="orderId"/>
        <alias entity-alias="OH" name="orderDate"/>
        <alias entity-alias="OH" name="originFacilityId"/>
        <alias entity-alias="OH" name="externalId"/>
        <alias entity-alias="PS" field="externalId" name="productStoreExternalId"/>
        <alias entity-alias="SCENM" field="description" name="salesChannel"/>

        <entity-condition>
            <econdition field-name="orderTypeId" entity-alias="OH" operator="equals" value="TRANSFER_ORDER"/>
            <econdition entity-alias="OID" field-name="orderId" operator="equals" value=""/>
            <econdition entity-alias="INVORD" field-name="orderId" operator="equals" value=""/>
        </entity-condition>
    </view-entity>

    <view-entity entity-name="InvalidNetSuiteTOOrders" package="co.hotwax.netsuite.order">
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="OI" entity-name="org.apache.ofbiz.order.order.OrderItem" join-from-alias="OH">
            <key-map field-name="orderId"/>
        </member-entity>
        <member-entity entity-alias="GID" entity-name="org.apache.ofbiz.product.product.GoodIdentification" join-from-alias="OI" join-optional="true">
            <key-map field-name="productId"/>
            <entity-condition>
                <econdition field-name="goodIdentificationTypeId" value="NETSUITE_PRODUCT_ID"/>
                <date-filter/>
            </entity-condition>
        </member-entity>
        <alias-all entity-alias="OH"/>
        <alias name="productId" entity-alias="OI" field="productId"/>
        <entity-condition>
            <econdition field-name="goodIdentificationTypeId" entity-alias="GID" operator="equals" value="null"/>
            <econdition field-name="orderTypeId" entity-alias="OH" operator="equals" value="TRANSFER_ORDER"/>
        </entity-condition>
    </view-entity>

</entities